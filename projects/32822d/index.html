<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>登录+注册模块（前端） | 迷新白的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="标签页标题">
    <meta name="baidu-site-verification" content="codeva-nRPVSlBgY1">
    
    <link rel="preload" href="/assets/css/0.styles.6d46e2f3.css" as="style"><link rel="preload" href="/assets/js/app.0678369d.js" as="script"><link rel="preload" href="/assets/js/4.2a819298.js" as="script"><link rel="preload" href="/assets/js/1.459f44db.js" as="script"><link rel="preload" href="/assets/js/3.424b9c9b.js" as="script"><link rel="preload" href="/assets/js/14.2110d1ef.js" as="script"><link rel="prefetch" href="/assets/js/10.b411da95.js"><link rel="prefetch" href="/assets/js/100.86c1fa4f.js"><link rel="prefetch" href="/assets/js/101.51da8083.js"><link rel="prefetch" href="/assets/js/102.6ed4984f.js"><link rel="prefetch" href="/assets/js/103.28740fa2.js"><link rel="prefetch" href="/assets/js/104.dff20c88.js"><link rel="prefetch" href="/assets/js/105.e33ce77b.js"><link rel="prefetch" href="/assets/js/106.610b874c.js"><link rel="prefetch" href="/assets/js/107.74804a1e.js"><link rel="prefetch" href="/assets/js/108.31e50897.js"><link rel="prefetch" href="/assets/js/109.bddc8741.js"><link rel="prefetch" href="/assets/js/11.70c4c821.js"><link rel="prefetch" href="/assets/js/110.88616cd1.js"><link rel="prefetch" href="/assets/js/111.02e407d6.js"><link rel="prefetch" href="/assets/js/112.00c579cd.js"><link rel="prefetch" href="/assets/js/113.58c51772.js"><link rel="prefetch" href="/assets/js/114.8cb5a814.js"><link rel="prefetch" href="/assets/js/115.f104783a.js"><link rel="prefetch" href="/assets/js/116.83652adf.js"><link rel="prefetch" href="/assets/js/117.68afb32e.js"><link rel="prefetch" href="/assets/js/118.1996006a.js"><link rel="prefetch" href="/assets/js/12.fc034411.js"><link rel="prefetch" href="/assets/js/13.bf447d09.js"><link rel="prefetch" href="/assets/js/15.a8361dd6.js"><link rel="prefetch" href="/assets/js/16.5e587bb0.js"><link rel="prefetch" href="/assets/js/17.c50e8f3c.js"><link rel="prefetch" href="/assets/js/18.6045c98c.js"><link rel="prefetch" href="/assets/js/19.ffae77cb.js"><link rel="prefetch" href="/assets/js/2.b5f1636b.js"><link rel="prefetch" href="/assets/js/20.86ebaf93.js"><link rel="prefetch" href="/assets/js/21.72cf51ac.js"><link rel="prefetch" href="/assets/js/22.23919162.js"><link rel="prefetch" href="/assets/js/23.517c5d3c.js"><link rel="prefetch" href="/assets/js/24.a9da4446.js"><link rel="prefetch" href="/assets/js/25.53c77f65.js"><link rel="prefetch" href="/assets/js/26.66d8631a.js"><link rel="prefetch" href="/assets/js/27.115a7249.js"><link rel="prefetch" href="/assets/js/28.849a6b6e.js"><link rel="prefetch" href="/assets/js/29.daed3500.js"><link rel="prefetch" href="/assets/js/30.a5862ca4.js"><link rel="prefetch" href="/assets/js/31.5e3c4540.js"><link rel="prefetch" href="/assets/js/32.318d83b3.js"><link rel="prefetch" href="/assets/js/33.d379353e.js"><link rel="prefetch" href="/assets/js/34.9b34b524.js"><link rel="prefetch" href="/assets/js/35.24fc424f.js"><link rel="prefetch" href="/assets/js/36.26c798dd.js"><link rel="prefetch" href="/assets/js/37.fcf0675c.js"><link rel="prefetch" href="/assets/js/38.517e57b7.js"><link rel="prefetch" href="/assets/js/39.a9e648c3.js"><link rel="prefetch" href="/assets/js/40.8a82b0af.js"><link rel="prefetch" href="/assets/js/41.24b1b6b5.js"><link rel="prefetch" href="/assets/js/42.5e42e841.js"><link rel="prefetch" href="/assets/js/43.bd23299e.js"><link rel="prefetch" href="/assets/js/44.b2b0fe99.js"><link rel="prefetch" href="/assets/js/45.fb893a9b.js"><link rel="prefetch" href="/assets/js/46.6ec41810.js"><link rel="prefetch" href="/assets/js/47.b1238335.js"><link rel="prefetch" href="/assets/js/48.66fc547c.js"><link rel="prefetch" href="/assets/js/49.bd4a733f.js"><link rel="prefetch" href="/assets/js/5.d27e7371.js"><link rel="prefetch" href="/assets/js/50.4c5f00e0.js"><link rel="prefetch" href="/assets/js/51.c47876a4.js"><link rel="prefetch" href="/assets/js/52.f951f159.js"><link rel="prefetch" href="/assets/js/53.292fd804.js"><link rel="prefetch" href="/assets/js/54.4e4f4c4b.js"><link rel="prefetch" href="/assets/js/55.ac9acb08.js"><link rel="prefetch" href="/assets/js/56.6b4556e0.js"><link rel="prefetch" href="/assets/js/57.31c074da.js"><link rel="prefetch" href="/assets/js/58.39209271.js"><link rel="prefetch" href="/assets/js/59.0456f81c.js"><link rel="prefetch" href="/assets/js/6.37db4b1a.js"><link rel="prefetch" href="/assets/js/60.15d8bbb3.js"><link rel="prefetch" href="/assets/js/61.b2f9de3c.js"><link rel="prefetch" href="/assets/js/62.6dd7f506.js"><link rel="prefetch" href="/assets/js/63.0421c167.js"><link rel="prefetch" href="/assets/js/64.c9cb8715.js"><link rel="prefetch" href="/assets/js/65.12bffbbe.js"><link rel="prefetch" href="/assets/js/66.88765122.js"><link rel="prefetch" href="/assets/js/67.da4635a3.js"><link rel="prefetch" href="/assets/js/68.3c63ba61.js"><link rel="prefetch" href="/assets/js/69.1219a0e7.js"><link rel="prefetch" href="/assets/js/7.e8babe25.js"><link rel="prefetch" href="/assets/js/70.3bf0c89d.js"><link rel="prefetch" href="/assets/js/71.4609fbf2.js"><link rel="prefetch" href="/assets/js/72.ace2d2ea.js"><link rel="prefetch" href="/assets/js/73.e15ac531.js"><link rel="prefetch" href="/assets/js/74.d47d3d15.js"><link rel="prefetch" href="/assets/js/75.784758d9.js"><link rel="prefetch" href="/assets/js/76.0e73a7e0.js"><link rel="prefetch" href="/assets/js/77.89347cf2.js"><link rel="prefetch" href="/assets/js/78.9c50e302.js"><link rel="prefetch" href="/assets/js/79.00d763e1.js"><link rel="prefetch" href="/assets/js/80.5b6be473.js"><link rel="prefetch" href="/assets/js/81.b2b214ce.js"><link rel="prefetch" href="/assets/js/82.249cca3e.js"><link rel="prefetch" href="/assets/js/83.b75ea537.js"><link rel="prefetch" href="/assets/js/84.17c4e646.js"><link rel="prefetch" href="/assets/js/85.5e44bc70.js"><link rel="prefetch" href="/assets/js/86.f94349cd.js"><link rel="prefetch" href="/assets/js/87.680e7388.js"><link rel="prefetch" href="/assets/js/88.1e7d772f.js"><link rel="prefetch" href="/assets/js/89.60f3d956.js"><link rel="prefetch" href="/assets/js/90.3f4140b9.js"><link rel="prefetch" href="/assets/js/91.021a013d.js"><link rel="prefetch" href="/assets/js/92.8f4eee93.js"><link rel="prefetch" href="/assets/js/93.aab62397.js"><link rel="prefetch" href="/assets/js/94.ec6ad21a.js"><link rel="prefetch" href="/assets/js/95.7821d592.js"><link rel="prefetch" href="/assets/js/96.248f77af.js"><link rel="prefetch" href="/assets/js/97.29ac9496.js"><link rel="prefetch" href="/assets/js/98.79e86021.js"><link rel="prefetch" href="/assets/js/99.53776a77.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.715d43b1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d46e2f3.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/msingbai/blog_img@main/blog/basic/candle.png" alt="迷新白的博客" class="logo"> <span class="site-name can-hide">迷新白的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/speak/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/frontend/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">Vuepress</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/springboot/" class="nav-link">Springboot</a></li><li class="dropdown-item"><!----> <a href="/projects/32822d/404" class="nav-link"></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tools/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">开发工具</a></li><li class="dropdown-item"><!----> <a href="/sys/" class="nav-link">系统工具</a></li></ul></div></div><div class="nav-item"><a href="/read/" class="nav-link">读吧</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><a href="/projects/" class="link-title router-link-active">项目</a> <span class="title" style="display:none;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Spark217/article/details/145481497?spm=1001.2014.3001.5502" target="_blank" rel="noopener noreferrer" class="nav-link external">
  智能浇花系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://msingbai.top/projects/#%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer" class="nav-link external">
  用户中心系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">关于</a></li><li class="dropdown-item"><!----> <a href="/more/friend/8e1a3d/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/msingbai" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://avatars.githubusercontent.com/u/18241922?v=4"> <div class="blogger-info"><h3>迷新白</h3> <span>愿你平安</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/speak/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/frontend/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/" class="nav-link">Vuepress</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/springboot/" class="nav-link">Springboot</a></li><li class="dropdown-item"><!----> <a href="/projects/32822d/404" class="nav-link"></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tools/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">开发工具</a></li><li class="dropdown-item"><!----> <a href="/sys/" class="nav-link">系统工具</a></li></ul></div></div><div class="nav-item"><a href="/read/" class="nav-link">读吧</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><a href="/projects/" class="link-title router-link-active">项目</a> <span class="title" style="display:none;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Spark217/article/details/145481497?spm=1001.2014.3001.5502" target="_blank" rel="noopener noreferrer" class="nav-link external">
  智能浇花系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://msingbai.top/projects/#%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer" class="nav-link external">
  用户中心系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">关于</a></li><li class="dropdown-item"><!----> <a href="/more/friend/8e1a3d/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/msingbai" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>用户中心系统</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/projects/58146f/" class="sidebar-link">前端初始化</a></li><li><a href="/projects/39691d/" class="sidebar-link">用户中心后端-1</a></li><li><a href="/projects/8eef80/" class="sidebar-link">用户中心后端-2</a></li><li><a href="/projects/ea56cb/" class="sidebar-link">注册模块（后端）</a></li><li><a href="/projects/df37ab/" class="sidebar-link">登录模块（后端）</a></li><li><a href="/projects/6d7d3b/" class="sidebar-link">管理模块（后端）</a></li><li><a href="/projects/659246/" class="sidebar-link">Ant Design Pro前端初始化</a></li><li><a href="/projects/32822d/" aria-current="page" class="active sidebar-link">登录+注册模块（前端）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/projects/32822d/#登录功能" class="sidebar-link">登录功能</a></li><li class="sidebar-sub-header level2"><a href="/projects/32822d/#注册功能" class="sidebar-link">注册功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/projects/32822d/#路由跳转逻辑" class="sidebar-link">路由跳转逻辑</a></li><li class="sidebar-sub-header level3"><a href="/projects/32822d/#修改前端样式" class="sidebar-link">修改前端样式</a></li><li class="sidebar-sub-header level3"><a href="/projects/32822d/#前端-表单组件使用" class="sidebar-link">前端-表单组件使用</a></li><li class="sidebar-sub-header level4"><a href="/projects/32822d/#按钮修改" class="sidebar-link">按钮修改</a></li><li class="sidebar-sub-header level4"><a href="/projects/32822d/#提交逻辑" class="sidebar-link">提交逻辑</a></li><li class="sidebar-sub-header level4"><a href="/projects/32822d/#注册逻辑" class="sidebar-link">注册逻辑</a></li><li class="sidebar-sub-header level4"><a href="/projects/32822d/#断点测试" class="sidebar-link">断点测试</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/projects/32822d/#登录页面优化" class="sidebar-link">登录页面优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/projects/32822d/#优化后效果" class="sidebar-link">优化后效果</a></li></ul></li></ul></li><li><a href="/projects/b75478/" class="sidebar-link">管理模块+登录状态（前端）</a></li><li><a href="/projects/253f15/" class="sidebar-link">注销模块+校验模块（前后端）</a></li><li><a href="/projects/042bc4/" class="sidebar-link">异常处理器（后端优化）</a></li><li><a href="/projects/21a0e3/" class="sidebar-link">请求响应处理器（前端）</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>仿Deepseek官网AI聊天网站</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>尤克里里音月-Flutter（需求分析阶段）</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/projects/#项目" data-v-06225672>项目</a></li><li data-v-06225672><a href="/projects/#用户中心系统" data-v-06225672>用户中心系统</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://msingbai.github.io/" target="_blank" title="作者" class="beLink" data-v-06225672>迷新白</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-04-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">登录+注册模块（前端）<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="_09-登录-注册模块-前端"><a href="#_09-登录-注册模块-前端" class="header-anchor">#</a> 09.登录+注册模块（前端）</h1> <p>这是用户中心<strong>前端</strong>部分的<strong>登录功能</strong>和<strong>注册功能</strong></p> <h2 id="登录功能"><a href="#登录功能" class="header-anchor">#</a> 登录功能</h2> <ul><li>在<code>pages\user\Login\index.tsx</code>中</li></ul> <p><code>username =&gt; userAccount</code>、<code>password =&gt; userPassword</code>,与后端保持一致【Ctrl+R】</p> <ul><li><p>对密码进行长度校验【Ant Design】</p> <table><thead><tr><th>名称</th> <th>说明</th> <th>类型</th></tr></thead> <tbody><tr><td>min</td> <td>必须设置，type：string 类型为字符串最小长度；number 类型时为最小值；array 类型时为数组最小长度</td> <td>number</td></tr></tbody></table></li></ul> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code>                placeholder<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'请输入密码'</span><span class="token punctuation">}</span>
                rules<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
                  <span class="token punctuation">{</span>
                    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    message<span class="token operator">:</span> <span class="token string">'密码是必填项！'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token comment">//增加长度检验</span>
                  <span class="token punctuation">{</span>
                    min<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
                    type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                    message<span class="token operator">:</span> <span class="token string">'密码长度不能小于8位！'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>修改登录判断逻辑<code>const handleSubmit</code></li></ul> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>LoginParams<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 登录</span>
      <span class="token comment">// const msg = await login({</span>
      <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>values<span class="token punctuation">,</span>
        type<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// if (msg.status === 'ok') {</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'ok'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//需要修改</span>
        <span class="token keyword">const</span> defaultLoginSuccessMessage <span class="token operator">=</span> <span class="token string">'登录成功！'</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>defaultLoginSuccessMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">fetchUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/** 此方法会跳转到 redirect 参数所在的位置 */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>history<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> query <span class="token punctuation">}</span> <span class="token operator">=</span> history<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token operator">=</span> query <span class="token keyword">as</span> <span class="token punctuation">{</span>
          redirect<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>redirect <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// console.log(msg);</span>
      <span class="token comment">// // 如果失败去设置用户错误信息</span>
      <span class="token comment">// setUserLoginState(msg);</span>
      <span class="token function">setUserLoginState</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> defaultLoginFailureMessage <span class="token operator">=</span> <span class="token string">'登录失败，请重试！'</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>defaultLoginFailureMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>此时遇到一个问题</p> <p>响应成功了，登录的提示没成功弹出</p> <p><img src="/assets/img/image-20250407182437766.f9037ffd.png" alt="image-20250407182437766"></p> <p>原因是前端的逻辑里，有一句<code>if (user.status === 'ok')</code></p> <p>这个在后端还没实现，我们直接把它改为<code>if (user)</code></p> <p>登录逻辑成功</p> <p><img src="data:image/png;base64,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" alt="image-20250407183050418"></p> <h2 id="注册功能"><a href="#注册功能" class="header-anchor">#</a> 注册功能</h2> <ul><li><p>复制Login文件夹粘贴为Register</p></li> <li><p>将下面两个位置的<code>Login = &gt; Register</code></p></li></ul> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> Register<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Register<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>config/routes.ts</code>文件中增加<code>register</code>的路由（即地址栏中输入的跳转）</li></ul> <p><img src="/assets/img/image-20250407213323537.e4ea6154.png" alt="image-20250407213323537"></p> <p>此时访问 <code>user/register</code> 页面会自动重定向到 <code>user/login</code> 页面，无法进入 register 页面</p> <p>原因： <code>app.tsx</code> 是项目的全局文件，里面有两个判断逻辑会对每个页面进行校验，不允许进入任何页面是合适的</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code>  <span class="token keyword">const</span> <span class="token function-variable function">fetchUserInfo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">queryCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> msg<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>loginPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 页面路径判断 如果不是登录页面，执行</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>history<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">!==</span> loginPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> currentUser <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      fetchUserInfo<span class="token punctuation">,</span>
      currentUser<span class="token punctuation">,</span>
      settings<span class="token operator">:</span> defaultSettings<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">//如果用户未登录（fetchUserInfo 抛出错误），则将用户重定向到登录页面。</span>
<span class="token comment">//如果用户已登录，获取用户信息并将其传递给应用的其他部分。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="路由跳转逻辑"><a href="#路由跳转逻辑" class="header-anchor">#</a> 路由跳转逻辑</h3> <p>修改下面两处逻辑，检测若未登录不做跳转</p> <p>定义一个白名单数组，包含不需要登录就可以访问的路径，如<strong>注册页面</strong>和<strong>登录页面</strong>。</p> <p><img src="/assets/img/image-20250407214649015.07666191.png" alt="image-20250407214649015"></p> <p><img src="/assets/img/image-20250407214630250.a7b5c77b.png" alt="image-20250407214630250"></p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> <span class="token function-variable function">fetchUserInfo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">queryCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> msg<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// history.push(loginPath);</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> whiteList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/user/register'</span><span class="token punctuation">,</span> loginPath<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>whiteList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果没有登录，重定向到 Login</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>initialState<span class="token operator">?.</span>currentUser<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>loginPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="修改前端样式"><a href="#修改前端样式" class="header-anchor">#</a> 修改前端样式</h3> <p>在<code>Register\index.tsx</code>中</p> <ul><li>增加确认密码框</li> <li>删改部分逻辑</li></ul> <p><strong>完整代码</strong></p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> Footer <span class="token keyword">from</span> <span class="token string">'@/components/Footer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> login <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/services/ant-design-pro/api'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getFakeCaptcha <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/services/ant-design-pro/login'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  AlipayCircleOutlined<span class="token punctuation">,</span>
  LockOutlined<span class="token punctuation">,</span>
  MobileOutlined<span class="token punctuation">,</span>
  TaobaoCircleOutlined<span class="token punctuation">,</span>
  UserOutlined<span class="token punctuation">,</span>
  WeiboCircleOutlined<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  LoginForm<span class="token punctuation">,</span>
  ProFormCaptcha<span class="token punctuation">,</span>
  ProFormCheckbox<span class="token punctuation">,</span>
  ProFormText<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/pro-components'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Alert<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Tabs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> useModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.less'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SYSTEM_LOGO</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/constants'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> LoginMessage<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> content <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Alert</span></span>
    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
      marginBottom<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">message</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span></span>
    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">showIcon</span>
  <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Register<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>userLoginState<span class="token punctuation">,</span> setUserLoginState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>LoginResult<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>type<span class="token punctuation">,</span> setType<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'account'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span>LoginParams<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 注册</span>
      <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>values<span class="token punctuation">,</span>
        type<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// if (msg.status === 'ok') {</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> defaultLoginSuccessMessage <span class="token operator">=</span> <span class="token string">'注册成功！'</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>defaultLoginSuccessMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/** 此方法会跳转到 redirect 参数所在的位置 */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>history<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> query <span class="token punctuation">}</span> <span class="token operator">=</span> history<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token operator">=</span> query <span class="token keyword">as</span> <span class="token punctuation">{</span>
          redirect<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>redirect <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">setUserLoginState</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> defaultLoginFailureMessage <span class="token operator">=</span> <span class="token string">'注册失败，请重试！'</span><span class="token punctuation">;</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>defaultLoginFailureMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> status<span class="token punctuation">,</span> type<span class="token operator">:</span> loginType <span class="token punctuation">}</span> <span class="token operator">=</span> userLoginState<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>content<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginForm</span></span>
          <span class="token comment">// logo={&lt;img alt=&quot;logo&quot; src=&quot;/logo.svg&quot; /&gt;}</span>
          <span class="token attr-name">logo</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">SYSTEM_LOGO</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span>
          <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>用户中心系统<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">subTitle</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'A designing UserCenter for studying——msingbai'</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">initialValues</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            autoLogin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onFinish</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span>values <span class="token keyword">as</span> <span class="token constant">API</span><span class="token punctuation">.</span>LoginParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs</span></span> <span class="token attr-name">activeKey</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>type<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setType<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs.TabPane</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tab</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'账户密码注册'</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token punctuation">{</span><span class="token comment">/*&lt;Tabs.TabPane key=&quot;mobile&quot; tab={'手机号注册'} /&gt;*/</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tabs</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token punctuation">{</span>status <span class="token operator">===</span> <span class="token string">'error'</span> <span class="token operator">&amp;&amp;</span> loginType <span class="token operator">===</span> <span class="token string">'account'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
            <span class="token comment">// &lt;LoginMessage content={'错误的用户名和密码(admin/ant.design)'} /&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginMessage</span></span> <span class="token attr-name">content</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'错误的账号和密码'</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token punctuation">{</span>type <span class="token operator">===</span> <span class="token string">'account'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProFormText</span></span>
                <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAccount<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">fieldProps</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  size<span class="token operator">:</span> <span class="token string">'large'</span><span class="token punctuation">,</span>
                  prefix<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserOutlined</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>prefixIcon<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token comment">// placeholder={'用户名: admin or user'}</span>
                <span class="token attr-name">placeholder</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'请输入账号'</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">rules</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
                  <span class="token punctuation">{</span>
                    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token comment">// message: '用户名是必填项！',</span>
                    message<span class="token operator">:</span> <span class="token string">'账号是必填项！'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProFormText.Password</span></span>
                <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userPassword<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">fieldProps</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  size<span class="token operator">:</span> <span class="token string">'large'</span><span class="token punctuation">,</span>
                  prefix<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LockOutlined</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>prefixIcon<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token comment">// placeholder={'密码: ant.design'}</span>
                <span class="token attr-name">placeholder</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'请输入密码'</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">rules</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
                  <span class="token punctuation">{</span>
                    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    message<span class="token operator">:</span> <span class="token string">'密码是必填项！'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token comment">//增加长度检验</span>
                  <span class="token punctuation">{</span>
                    min<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
                    type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                    message<span class="token operator">:</span> <span class="token string">'密码长度不能小于8位！'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span><span class="token comment">/*确认密码*/</span><span class="token punctuation">}</span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProFormText.Password</span></span>
                <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkPassword<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">fieldProps</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  size<span class="token operator">:</span> <span class="token string">'large'</span><span class="token punctuation">,</span>
                  prefix<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LockOutlined</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>prefixIcon<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token comment">// placeholder={'密码: ant.design'}</span>
                <span class="token attr-name">placeholder</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'请确认密码'</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">rules</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
                  <span class="token punctuation">{</span>
                    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    message<span class="token operator">:</span> <span class="token string">'确认密码是必填项！'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token comment">//增加长度检验</span>
                  <span class="token punctuation">{</span>
                    min<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
                    type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                    message<span class="token operator">:</span> <span class="token string">'密码长度不能小于8位！'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">

          </span><span class="token punctuation">{</span>status <span class="token operator">===</span> <span class="token string">'error'</span> <span class="token operator">&amp;&amp;</span> loginType <span class="token operator">===</span> <span class="token string">'mobile'</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginMessage</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>验证码错误<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">LoginForm</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Footer</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Register<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br></div></div><h5 id="样式预览"><a href="#样式预览" class="header-anchor">#</a> 样式预览</h5> <p><img src="/assets/img/image-20250407215834795.dd802719.png" alt="image-20250407215834795"></p> <p>此时登录按钮没有变成注册，是因为looginForm组件的原因</p> <h3 id="前端-表单组件使用"><a href="#前端-表单组件使用" class="header-anchor">#</a> 前端-表单组件使用</h3> <h4 id="按钮修改"><a href="#按钮修改" class="header-anchor">#</a> 按钮修改</h4> <p>找到组件库的源文件</p> <p><code>node_modules/@ant-design/pro-form/lib/layouts/LoginForm/index.js</code></p> <p><img src="/assets/img/image-20250407220652113.7bccd27e.png" alt="image-20250407220652113"></p> <p>回到注册页面 将按钮组件改标题</p> <p><img src="/assets/img/image-20250407221141126.a5de92b0.png" alt="image-20250407221141126"></p> <p>可以看到已经改动成功啦</p> <p><img src="/assets/img/image-20250407221200531.05dcb069.png" alt="image-20250407221200531"></p> <h4 id="提交逻辑"><a href="#提交逻辑" class="header-anchor">#</a> 提交逻辑</h4> <p>定位到LoginParams（<code>src/services/ant-design-pro/typings.d.ts</code>）</p> <p>新增注册的参数</p> <img src="/assets/img/image-20250407224026063.60d7a3c4.png" alt="image-20250407224026063" style="zoom:33%;"> <p>回到<code>index.tsx</code>将LoginParams替换成RegisterParams</p> <h4 id="注册逻辑"><a href="#注册逻辑" class="header-anchor">#</a> 注册逻辑</h4> <p>增加校验密码逻辑</p> <p><img src="/assets/img/image-20250407224436649.f8fc5c65.png" alt="image-20250407224436649"></p> <p>增加注册接口</p> <p><img src="/assets/img/image-20250407224753127.35a5bfc3.png" alt="image-20250407224753127"></p> <p>RegisterResult<code>src/services/ant-design-pro/typings.d.ts</code></p> <img src="/assets/img/image-20250407224705721.0ec0ea95.png" alt="image-20250407224705721" style="zoom:33%;"> <p>删除Login相关，Register无关的代码</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// `const` LoginMessage: React.FC&lt;{</span>
<span class="token comment">//   `content`: string;</span>
<span class="token comment">// }&gt; = ({ `content` }) =&gt; (</span>
<span class="token comment">//   &lt;Alert</span>
<span class="token comment">//     style={{</span>
<span class="token comment">//       marginBottom: 24,</span>
<span class="token comment">//     }}</span>
<span class="token comment">//     message={`content`}</span>
<span class="token comment">//     type=&quot;error&quot;</span>
<span class="token comment">//     showIcon</span>
<span class="token comment">//   /&gt;</span>
<span class="token comment">// );</span>

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const</span><span class="token template-punctuation string">`</span></span> Register<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// `const` [userLoginState, setUserLoginState] = `useState`&lt;API.LoginResult&gt;({});</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">[</span>type<span class="token punctuation">,</span> setType<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">useState</span><span class="token template-punctuation string">`</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">('account');

  // 表单提交
  `const` handleSubmit = `async` (values: API.RegisterParams) =&gt; </span><span class="token punctuation">{</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">{</span> userPassword<span class="token punctuation">,</span> checkPassword <span class="token punctuation">}</span> <span class="token operator">=</span> values<span class="token punctuation">;</span>
    <span class="token comment">// 校验</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">if</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">(</span>userPassword <span class="token operator">!==</span> checkPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'两次密码输入不一致'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">return</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">try</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">{</span>
      <span class="token comment">// 注册</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const</span><span class="token template-punctuation string">`</span></span> id <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">await</span><span class="token template-punctuation string">`</span></span> <span class="token function">register</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//user改为id</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">if</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">(</span>id <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const</span><span class="token template-punctuation string">`</span></span> defaultLoginSuccessMessage <span class="token operator">=</span> <span class="token string">'注册成功！'</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>defaultLoginSuccessMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/** 此方法会跳转到 redirect 参数所在的位置 */</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">if</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">(</span>history<span class="token punctuation">)</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">return</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">{</span> query <span class="token punctuation">}</span> <span class="token operator">=</span> history<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">const</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token operator">=</span> query <span class="token keyword">as</span> <span class="token punctuation">{</span>
          redirect<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/login?redirect=</span><span class="token template-punctuation string">`</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> redirect <span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">return</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">else</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">{</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">throw</span><span class="token template-punctuation string">`</span></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">new</span><span class="token template-punctuation string">`</span></span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">register error id = </span><span class="token template-punctuation string">`</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">$</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u</span><span class="token punctuation">&gt;</span></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">);
      }
    } </span><span class="token template-punctuation string">`</span></span><span class="token keyword">catch</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> (error) {
      </span><span class="token template-punctuation string">`</span></span><span class="token keyword">const</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> defaultLoginFailureMessage = '注册失败，请重试！';
      message.error(defaultLoginFailureMessage);
    }
  };

  // </span><span class="token template-punctuation string">`</span></span><span class="token keyword">const</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> { status, type: loginType } = userLoginState;
  </span><span class="token template-punctuation string">`</span></span><span class="token keyword">return</span>` <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs</span></span> <span class="token attr-name">activeKey</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>type<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setType<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs.TabPane</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tab</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&lt;u</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">'账户密码注册'</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> /&gt;
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tabs</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      // {status === 'error' &amp;&amp; loginType === 'account' &amp;&amp; (
      //   &lt;LoginMessage content=&lt;u&gt;{'错误的账户和密码'}&lt;/u&gt; /&gt;
      // )}
      
      ......

      // {status === 'error' &amp;&amp; loginType === 'mobile' &amp;&amp; &lt;LoginMessage content=&quot;验证码错误&quot; /&gt;}
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">LoginForm</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    .....
};
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h4 id="断点测试"><a href="#断点测试" class="header-anchor">#</a> 断点测试</h4> <img src="/assets/img/image-20250407231857213.0334223a.png" alt="image-20250407231857213" style="zoom:50%;"> <img src="/assets/img/image-20250407231933716.4ff378fc.png" alt="image-20250407231933716" style="zoom:25%;"> <p>注册失败</p> <img src="/assets/img/image-20250407232256658.caf351ac.png" alt="image-20250407232256658" style="zoom:50%;"> <p>判断是前端的问题，</p> <p><img src="/assets/img/image-20250407234135549.5b407a9b.png" alt="image-20250407234135549"></p> <p>灰色部分为前端发送的请求，里面多了一个UserRegisterRequest套住了，获取不到</p> <p>ms是毫秒，千分之一秒</p> <p>测试了一下Login的功能，前端没有问题，格式也是一致的</p> <p>取消断点</p> <p>测试已有账号的注册，返回正常</p> <p><img src="/assets/img/image-20250408002107077.8bcc5f50.png" alt="image-20250408002107077">测试新账号，能够注册成功，回到登陆界面</p> <img src="/assets/img/image-20250408002213778.ee4d7f52.png" alt="image-20250408002213778" style="zoom:50%;"> <p><img src="/assets/img/image-20250408001854103.bfb411c4.png" alt="image-20250408001854103"></p> <p>此时有一个问题</p> <p><img src="data:image/png;base64,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" alt="image-20250408002233205"></p> <p>用户没有rediact参数</p> <p>删除+修改注册页面的这段代码</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code>        <span class="token comment">//const {redirect} = query as {</span>
          <span class="token comment">//redirect: string;</span>
        <span class="token comment">//};删除</span>
        history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          pathname<span class="token operator">:</span> <span class="token string">'user/login'</span><span class="token punctuation">,</span>
          query<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="登录页面优化"><a href="#登录页面优化" class="header-anchor">#</a> 登录页面优化</h2> <p>完整代码</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
            <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
              display<span class="token operator">:</span> <span class="token string">'flex'</span><span class="token punctuation">,</span>                   <span class="token comment">//将div设置为flex容器</span>
              marginBottom<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
              justifyContent<span class="token operator">:</span> <span class="token string">'space-between'</span><span class="token punctuation">,</span>  <span class="token comment">//将子元素均分在容器内，使得他们间距相等</span>
              alignItems<span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>             <span class="token comment">//使得子元素在垂直方向上居中对齐</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProFormCheckbox</span></span> <span class="token attr-name">noStyle</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>autoLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              自动登录
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ProFormCheckbox</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/register<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text"> 注册账号 </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            &lt;a
              style=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                float<span class="token operator">:</span> <span class="token string">'right'</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
              href = &quot;mailto:xxx@email.com&quot;//发邮件联系管理员
              target=&quot;_blank&quot; rel=&quot;noreferrer&quot;
            &gt;
              忘记密码 ?
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="优化后效果"><a href="#优化后效果" class="header-anchor">#</a> 优化后效果</h3> <img src="/assets/img/image-20250408004559151.aa551c65.png" alt="image-20250408004559151" style="zoom:50%;"> <p><em>文字写于：广东</em></p></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83%E7%B3%BB%E7%BB%9F" title="标签">#用户中心系统</a><a href="/tags/?tag=%E5%89%8D%E7%AB%AF" title="标签">#前端</a></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2025/4/25 20:22:48</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/projects/659246/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Ant Design Pro前端初始化</div></a> <a href="/projects/b75478/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">管理模块+登录状态（前端）</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/projects/659246/" class="prev">Ant Design Pro前端初始化</a></span> <span class="next"><a href="/projects/b75478/">管理模块+登录状态（前端）</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/projects/0d846d/"><div>
            第一次对话完善
            <!----></div></a> <span class="date">04-27</span></dt></dl><dl><dd>02</dd> <dt><a href="/projects/b6c8ea/"><div>
            保留上下文对话
            <!----></div></a> <span class="date">04-27</span></dt></dl><dl><dd>03</dd> <dt><a href="/projects/8bb9c5/"><div>
            首页完善（后端）
            <!----></div></a> <span class="date">04-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:SparkLast@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/msingbai" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.zhihu.com/people/mi-xin-bai" title="知乎" target="_blank" class="iconfont icon-zhihu"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2025
    <span>迷新白 | 的博客<br> <a href="/sitemap.xml">sitemap</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a><br/><a href="https://www.foreverblog.cn/go.html" target="_blank"> <img src="https://img.foreverblog.cn/wormhole_3_tp.gif" alt="" style="width:auto;height:32px;" title="穿梭虫洞-随机访问十年之约友链博客"></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><!----><div></div></div></div>
    <script src="/assets/js/app.0678369d.js" defer></script><script src="/assets/js/4.2a819298.js" defer></script><script src="/assets/js/1.459f44db.js" defer></script><script src="/assets/js/3.424b9c9b.js" defer></script><script src="/assets/js/14.2110d1ef.js" defer></script>
  </body>
</html>
