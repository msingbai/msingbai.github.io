---
title: Spring Bootå’ŒSpringã€MyBatis
date: 2025-03-26 10:38:51
permalink: /backend/e63710/
categories:
  - åç«¯
  - åç«¯åŸºç¡€
tags:
  - Spring
---

SpringBootæ—©æœ‰è€³é—»ï¼Œç”šè‡³åœ¨ä¸çŸ¥é“ä»–ä»¬çš„æ—¶å€™å°±å·²ç»ç”¨è¿‡ï¼Œä»–ä»¬éƒ½æ˜¯å•¥ï¼ŸğŸ¤”

<!-- more -->

# 03.Spring Bootå’ŒSpringã€MyBatis

## ä»€ä¹ˆæ˜¯MyBatisçš„Mapperå±‚ï¼Ÿ

â€‹	åœ¨åç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®åº“ä¸­çš„æ•°æ®æ˜ å°„åˆ°Javaå¯¹è±¡ä¸Šï¼Œå¯¹æ•°æ®è¿›è¡Œå¢åˆ æŸ¥æ”¹ç­‰æ“ä½œã€‚MyBatisæ˜¯ä¸€ä¸ªJavaæŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒSQLæ˜ å°„ï¼Œå…è®¸å¼€å‘è€…ç¼–å†™SQLè¯­å¥å¹¶ä¸Javaå¯¹è±¡è¿›è¡Œäº¤äº’ã€‚

åœ¨MyBatisä¸­ï¼ŒMapperå±‚é€šå¸¸ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š

> 1. **Mapperæ¥å£**ï¼šå®šä¹‰ä¸æ•°æ®åº“äº¤äº’çš„æ–¹æ³•ã€‚
> 2. **Mapper XMLæ–‡ä»¶**ï¼šåŒ…å«SQLè¯­å¥çš„æ˜ å°„ï¼Œå®šä¹‰å…·ä½“çš„SQLæ“ä½œã€‚

æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå®ä½“ç±»Userï¼Œç”¨äºè¡¨ç¤ºæ•°æ®åº“ä¸­çš„ç”¨æˆ·ä¿¡æ¯ã€‚

<img src="../../.vuepress/public/blog_images/image-20250326104701934.png" alt="image-20250326104701934" style="zoom: 33%;" />

**`UserMapper`æ¥å£**

Mapperå®šä¹‰ä¸æ•°æ®åº“æ“ä½œç›¸å…³çš„æ–¹æ³•ã€‚æ¯ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªSQLæŸ¥è¯¢æˆ–æ›´æ–°æ“ä½œã€‚

## ä»€ä¹ˆæ˜¯Spring Bootå’ŒSpringï¼Ÿ

**Spring Boot** æ˜¯åŸºäºSpringæ¡†æ¶çš„æ‰©å±•å·¥å…·

###  **Spring vs Spring Boot å¯¹æ¯”**

| ç‰¹æ€§         | Spring                               | Spring Boot                     |
| :----------- | :----------------------------------- | :------------------------------ |
| **å®šä½**     | åŸºç¡€æ¡†æ¶ï¼Œæä¾›æ ¸å¿ƒåŠŸèƒ½ï¼ˆIoCã€AOPç­‰ï¼‰ | åŸºäºSpringçš„å¿«é€Ÿå¼€å‘æ¡†æ¶        |
| **é…ç½®**     | éœ€è¦æ‰‹åŠ¨é…ç½®å¾ˆå¤šï¼ˆXML/æ³¨è§£ï¼‰         | **è‡ªåŠ¨é…ç½®**ï¼Œå¤§éƒ¨åˆ†é»˜è®¤æå®š    |
| **æœåŠ¡å™¨**   | éœ€è¦é¢å¤–éƒ¨ç½²ï¼ˆå¦‚Tomcatï¼‰             | **å†…åµŒæœåŠ¡å™¨**ï¼Œç›´æ¥è¿è¡Œ        |
| **ä¾èµ–ç®¡ç†** | éœ€è¦è‡ªå·±ç®¡ç†ä¾èµ–                     | æä¾›**starter**ï¼Œä¸€é”®å¼•å…¥ç›¸å…³åº“ |
| **é€‚ç”¨åœºæ™¯** | éœ€è¦é«˜åº¦å®šåˆ¶åŒ–çš„å¤æ‚ç³»ç»Ÿ             | å¿«é€Ÿå¼€å‘ã€å¾®æœåŠ¡ã€REST API      |

### **ä¸¾ä¸ªä¾‹å­ ğŸŒ°**

#### ç›®æ ‡

åˆ›å»ºä¸€ä¸ªç®€å•çš„HTTPæ¥å£ï¼Œè®¿é—® `http://localhost:8080/hello` æ—¶è¿”å› `"Hello, Spring Boot!"`ã€‚

#### **â‘ .ç”¨ Spring å†™ä¸€ä¸ªWebæ¥å£**

ç›¸æ¯”äºSpring Bootçš„â€œä¸€é”®å¼â€å¼€å‘ï¼Œ**åŸç”ŸSpringéœ€è¦æ‰‹åŠ¨é…ç½®å¾ˆå¤šæ­¥éª¤**ï¼Œæ¯”å¦‚ï¼š

- æ‰‹åŠ¨é…ç½®TomcatæœåŠ¡å™¨
- æ‰‹åŠ¨ç¼–å†™XMLå®šä¹‰Bean
- æ‰‹åŠ¨åˆå§‹åŒ–Springå®¹å™¨

##### **åˆ›å»ºMavené¡¹ç›®**

###### **ï¼ˆ1ï¼‰æ–°å»ºé¡¹ç›®**

1. åœ¨IDEä¸­é€‰æ‹© **Mavené¡¹ç›®**ï¼ˆä¸æ˜¯Spring Bootï¼ï¼‰ã€‚
2. å¡«å†™ `GroupId`ï¼ˆå¦‚ `com.example`ï¼‰å’Œ `ArtifactId`ï¼ˆå¦‚ `spring-demo`ï¼‰ã€‚

###### **ï¼ˆ2ï¼‰æ·»åŠ ä¾èµ–**

åœ¨ `pom.xml` ä¸­åŠ å…¥Springå’ŒServletä¾èµ–ï¼š

```xml
<dependencies>
    <!-- Spring Core + MVC -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>5.3.30</version>  <!-- é€‰ä¸€ä¸ªç¨³å®šç‰ˆæœ¬ -->
    </dependency>

    <!-- Servlet APIï¼ˆTomcatéœ€è¦ï¼‰ -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>4.0.1</version>
        <scope>provided</scope>  <!-- ç¼–è¯‘æ—¶éœ€è¦ï¼Œè¿è¡Œæ—¶ç”±Tomcatæä¾› -->
    </dependency>
</dependencies>
```

##### **åˆå§‹åŒ–Spring**

###### **ï¼ˆ1ï¼‰åˆ›å»ºSpringé…ç½®æ–‡ä»¶**

åœ¨ `src/main/resources` ä¸‹æ–°å»º `spring-config.xml`ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd
           http://www.springframework.org/schema/mvc
           http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <!-- å¯ç”¨æ³¨è§£æ‰«æï¼ˆ@Controllerç­‰ï¼‰ -->
    <context:component-scan base-package="com.example"/>

    <!-- å¯ç”¨Spring MVCæ³¨è§£ï¼ˆ@GetMappingç­‰ï¼‰ -->
    <mvc:annotation-driven/>

    <!-- é…ç½®è§†å›¾è§£æå™¨ï¼ˆè™½ç„¶æˆ‘ä»¬åªè¿”å›å­—ç¬¦ä¸²ï¼Œä½†Spring MVCè¦æ±‚é…è¿™ä¸ªï¼‰ -->
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/"/>  <!-- å¯å¿½ç•¥ï¼Œå› ä¸ºæˆ‘ä»¬ä¸è¿”å›JSP -->
        <property name="suffix" value=".jsp"/>
    </bean>
</beans>
```

è¿è¡Œ HTML

------

###### **ï¼ˆ2ï¼‰é…ç½®Webåº”ç”¨**

åœ¨ `src/main/webapp/WEB-INF` ä¸‹æ–°å»º `web.xml`ï¼š

```xml
<!DOCTYPE web-app PUBLIC
        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>
    <!-- é…ç½®Springçš„DispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰ -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:spring-config.xml</param-value>  <!-- æŒ‡å®šSpringé…ç½®æ–‡ä»¶ -->
        </init-param>
        <load-on-startup>1</load-on-startup>  <!-- å®¹å™¨å¯åŠ¨æ—¶åŠ è½½ -->
    </servlet>

    <!-- æ˜ å°„æ‰€æœ‰HTTPè¯·æ±‚åˆ°DispatcherServlet -->
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app>
```

éœ€é¢å¤–å®‰è£…Tomcatå¹¶éƒ¨ç½²waråŒ…

##### **éƒ¨ç½²åˆ°Tomcat**

###### **ï¼ˆ1ï¼‰é…ç½®Tomcat**

1. ä¸‹è½½Tomcatï¼ˆå¦‚Tomcat 9ï¼‰å¹¶è§£å‹ã€‚
2. åœ¨IDEä¸­é…ç½®TomcatæœåŠ¡å™¨ï¼š
   - åœ¨IntelliJ IDEAä¸­ï¼š`Run â†’ Edit Configurations â†’ æ·»åŠ Tomcat Server`ã€‚
   - æŒ‡å®šTomcatå®‰è£…ç›®å½•ã€‚

###### **ï¼ˆ2ï¼‰æ„å»ºå¹¶è¿è¡Œ**

1. ç”¨Mavenæ‰“åŒ…é¡¹ç›®ï¼š

   ```bash
   mvn clean package
   ```

   è¿™ä¼šç”Ÿæˆ `target/spring-demo.war` æ–‡ä»¶ã€‚

2. å°† `war` æ–‡ä»¶å¤åˆ¶åˆ°Tomcatçš„ `webapps/` ç›®å½•ä¸‹ã€‚

3. å¯åŠ¨Tomcatï¼š

   ```bash
   cd tomcat/bin
   ./startup.sh  # Linux/Mac
   startup.bat    # Windows
   ```

##### **æµ‹è¯•æ¥å£**

è®¿é—®ï¼š

```
http://localhost:8080/spring-demo/hello
```

ï¼ˆ`spring-demo`æ˜¯ä½ çš„waråŒ…åï¼Œå¦‚æœæ²¡æ”¹å°±æ˜¯é¡¹ç›®åï¼‰

ä½ åº”è¯¥çœ‹åˆ°ï¼š

```
Hello, Spring!
```



#### **â‘¡.ç”¨ Spring Boot å†™åŒæ ·çš„æ¥å£**

##### **æ­¥éª¤ 1ï¼šåˆ›å»ºSpring Booté¡¹ç›®**

###### **æ–¹æ³•1ï¼šç”¨å®˜æ–¹å·¥å…·ï¼ˆæ¨èï¼‰**

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® [start.spring.io](https://start.spring.io/)ï¼ˆSpringå®˜æ–¹é¡¹ç›®ç”Ÿæˆå™¨ï¼‰ã€‚
2. æŒ‰ä»¥ä¸‹é…ç½®é€‰æ‹©ï¼š
   - **Project**ï¼šMavenï¼ˆé»˜è®¤ï¼‰
   - **Language**ï¼šJava
   - **Spring Boot**ï¼šé€‰æœ€æ–°ç¨³å®šç‰ˆï¼ˆå¦‚3.2.xï¼‰
   - **Group**ï¼š`com.example`ï¼ˆä½ çš„åŒ…åï¼‰
   - **Artifact**ï¼š`demo`ï¼ˆé¡¹ç›®åï¼‰
   - **Dependencies**ï¼šæ·»åŠ  `Spring Web`ï¼ˆè¿™æ˜¯å†™Webæ¥å£å¿…éœ€çš„ï¼‰
3. ç‚¹å‡» **Generate** ä¸‹è½½ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹åç”¨IDEï¼ˆå¦‚IntelliJ IDEAæˆ–VS Codeï¼‰æ‰“å¼€ã€‚

###### **æ–¹æ³•2ï¼šç”¨IDEç›´æ¥åˆ›å»º**

- åœ¨IntelliJ IDEAä¸­ï¼š
  1. æ–°å»ºé¡¹ç›® â†’ é€‰æ‹© **Spring Initializr**ã€‚
  2. åç»­æ­¥éª¤å’Œæ–¹æ³•1ä¸€è‡´ï¼Œå‹¾é€‰ `Spring Web` ä¾èµ–ã€‚

------

##### **æ­¥éª¤ 2ï¼šé¡¹ç›®ç»“æ„è¯´æ˜**

è§£å‹æˆ–åˆ›å»ºåçš„é¡¹ç›®ç›®å½•é•¿è¿™æ ·ï¼š

```lua
demo
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ main
â”‚   â”‚   â”œâ”€â”€ java
â”‚   â”‚   â”‚   â””â”€â”€ com
â”‚   â”‚   â”‚       â””â”€â”€ example
â”‚   â”‚   â”‚           â””â”€â”€ demo
â”‚   â”‚   â”‚               â””â”€â”€ DemoApplication.java  # å¯åŠ¨ç±»
â”‚   â”‚   â””â”€â”€ resources
â”‚   â”‚       â”œâ”€â”€ application.properties  # é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚       â””â”€â”€ static/  # é™æ€èµ„æºï¼ˆå¦‚HTMLï¼‰
â”œâ”€â”€ pom.xml  # Mavenä¾èµ–ç®¡ç†æ–‡ä»¶
```

å…³é”®æ–‡ä»¶ï¼š

- `DemoApplication.java`ï¼šSpring Bootçš„å¯åŠ¨å…¥å£ã€‚
- `pom.xml`ï¼šç®¡ç†é¡¹ç›®ä¾èµ–ï¼ˆæ¯”å¦‚ä½ é€‰çš„`Spring Web`å°±åœ¨è¿™é‡Œï¼‰ã€‚

------

##### **æ­¥éª¤ 3ï¼šç¼–å†™ä»£ç **

1. åœ¨ `src/main/java/com/example/demo` ä¸‹æ–°å»ºä¸€ä¸ªç±» `HelloController.java`ï¼š

   ```java
   package com.example.demo;
   
   import org.springframework.web.bind.annotation.GetMapping;
   import org.springframework.web.bind.annotation.RestController;
   
   @RestController  // å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªHTTPæ¥å£çš„æ§åˆ¶å™¨
   public class HelloController {
   
       @GetMapping("/hello")  // å®šä¹‰HTTP GETè¯·æ±‚çš„è·¯å¾„
       public String sayHello() {
           return "Hello, Spring Boot!";
       }
   }
   ```

   - `@RestController`ï¼šè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ç”¨æ¥å¤„ç†HTTPè¯·æ±‚çš„ã€‚
   - `@GetMapping("/hello")`ï¼šå½“ç”¨æˆ·è®¿é—® `/hello` æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

2. ç¡®ä¿å¯åŠ¨ç±» `DemoApplication.java` æ˜¯è¿™æ ·çš„ï¼ˆä¸€èˆ¬è‡ªåŠ¨ç”Ÿæˆï¼Œä¸ç”¨æ”¹ï¼‰ï¼š

   ```java
   package com.example.demo;
   
   import org.springframework.boot.SpringApplication;
   import org.springframework.boot.autoconfigure.SpringBootApplication;
   
   @SpringBootApplication  // æ ‡è®°è¿™æ˜¯Spring Bootåº”ç”¨
   public class DemoApplication {
       public static void main(String[] args) {
           SpringApplication.run(DemoApplication.class, args);  // å¯åŠ¨åº”ç”¨
       }
   }
   ```

------

##### **æ­¥éª¤ 4ï¼šè¿è¡Œé¡¹ç›®**

1. åœ¨IDEä¸­ï¼š

   - æ‰¾åˆ° `DemoApplication.java`ï¼Œå³é”®ç‚¹å‡» `Run`ã€‚

   - æˆ–ç›´æ¥è¿è¡Œå‘½ä»¤ï¼š

     ```bash
     ./mvnw spring-boot:run  # å¦‚æœä½ æ˜¯Mavené¡¹ç›®
     ```

2. ä½ ä¼šçœ‹åˆ°æ§åˆ¶å°è¾“å‡ºç±»ä¼¼ï¼š

   ```bash
   Tomcat started on port 8080  # å†…åµŒTomcatæœåŠ¡å™¨å¯åŠ¨äº†ï¼
   ```

------

##### **æ­¥éª¤ 5ï¼šæµ‹è¯•æ¥å£**

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š

   ```
   http://localhost:8080/hello
   ```

2. ä½ ä¼šçœ‹åˆ°é¡µé¢æ˜¾ç¤ºï¼š

   ```
   Hello, Spring Boot!
   ```

------

#### **å…³é”®ç‚¹è§£é‡Š**

1. **ä¸ºä»€ä¹ˆä¸ç”¨é…ç½®Tomcatï¼Ÿ**
   Spring Bootå†…åµŒäº†TomcatæœåŠ¡å™¨ï¼Œç›´æ¥è¿è¡Œå³å¯ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚

2. **ä¸ºä»€ä¹ˆä¸ç”¨å†™XMLï¼Ÿ**
   Spring Booté»˜è®¤ä½¿ç”¨**çº¦å®šä¼˜äºé…ç½®**ï¼Œæ¯”å¦‚ï¼š

   - æ‰€æœ‰HTTPæ¥å£é»˜è®¤åœ¨ `8080` ç«¯å£ã€‚
   - `@RestController` è‡ªåŠ¨å¤„ç†HTTPå“åº”ã€‚

3. **å¦‚ä½•æ”¹ç«¯å£ï¼Ÿ**
   åœ¨ `src/main/resources/application.properties` é‡ŒåŠ ä¸€è¡Œï¼š

   ```
   server.port=9090  # æ”¹æˆ9090ç«¯å£
   ```

*æ–‡å­—å†™äºï¼šå¹¿ä¸œ*