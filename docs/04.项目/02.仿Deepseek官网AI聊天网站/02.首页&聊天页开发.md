---
title: é¦–é¡µ&èŠå¤©é¡µå¼€å‘
date: 2025-04-25 16:37:08
permalink: /pages/42cbd8/
categories:
  - é¡¹ç›®
  - ä»¿Deepseekå®˜ç½‘AIèŠå¤©ç½‘ç«™
tags:
  - 
---


# 02.é¦–é¡µ&èŠå¤©é¡µå¼€å‘

AIå®˜ç½‘é¡µçš„**é¦–é¡µ**å’Œ**èŠå¤©é¡µ**å¼€å‘

<!-- more -->   

## åˆå§‹åŒ–nexté¡¹ç›®

åˆ›å»ºnexté¡¹ç›®ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œ

`npm create-next-app@latest`

- åˆå§‹åŒ–å„é¡¹é…ç½®

<img src="../../.vuepress/public/blog_images/å±å¹•æˆªå›¾ 2025-04-23 151930.png" alt="å±å¹•æˆªå›¾ 2025-04-23 151930" style="zoom:50%;" />åƒä¸‹é¢çš„å›¾ç‰‡å³åˆ›å»ºå®Œæˆâˆš

<img src="../../.vuepress/public/blog_images/å±å¹•æˆªå›¾ 2025-04-23 151945.png" alt="å±å¹•æˆªå›¾ 2025-04-23 151945" style="zoom:50%;" />

æ‰“å¼€æµ‹è¯•é¡µé¢<img src="../../.vuepress/public/blog_images/å±å¹•æˆªå›¾ 2025-04-23 152056.png" alt="å±å¹•æˆªå›¾ 2025-04-23 152056" style="zoom:50%;" />

## é¦–é¡µ

### å¯¼èˆªæ è®¾è®¡

æ§åˆ¶é¦–é¡µå±•ç¤ºçš„æ–‡ä»¶åœ¨`src/app/layout.tsx`ä¸­

- è®¾è®¡ï¼šå·¦ä¾§ä¸ºå¯¹è¯ç›¸å…³çš„å†…å®¹ï¼Œä½œä¸ºå¯¼èˆªæ ã€‚æ’å…¥å¯¼èˆªæ å—

![image-20250425164639096](../../.vuepress/public/blog_images/image-20250425164639096.png)

- æ–°å¢Navibarç»„ä»¶ `src/components/Navibar.tsx`

  ```tsx
  import React from "react";
  
  type Props = {}
  
  const Navibar = (props:Props) => {
      return (
          <div>Navibar</div>
      )
  }
  
  export default Navibar;
  ```

  åˆ›å»ºæˆåŠŸ

  <img src="../../.vuepress/public/blog_images/image-20250425164906221.png" alt="image-20250425164906221" style="zoom:50%;" />

  ç”±äºæˆ‘çš„ç³»ç»Ÿé»˜è®¤é¢œè‰²æ˜¯æ·±è‰²ï¼Œæ‰€ä»¥nexté¡¹ç›®é»˜è®¤ä¹Ÿæ˜¯æ·±è‰²æ–‡ä»¶äº†ï¼Œè¿™é‡Œçš„Navibarçœ‹ä¸è§ï¼Œåç»­æ­¥éª¤è¿›è¡Œè°ƒæ•´

- `src/app/page.tsx` æ‰“å¼€pageæ–‡ä»¶ï¼Œåˆ é™¤é»˜è®¤ä»£ç ![image-20250425165048711](../../.vuepress/public/blog_images/image-20250425165048711.png)

`Home` èƒ½å¤Ÿä½œä¸ºå‡½æ•°ç»„ä»¶å¯¼å‡º

### é—®å€™è¯­å—

- åœ¨é¦–é¡µçš„ä¸­é—´ä½ç½®å®‰æ”¾é—®å€™è¯­å—![image-20250425165323896](../../.vuepress/public/blog_images/image-20250425165323896.png)

  è®¾ç½®ä¸ºå…¨å±é«˜ï¼ˆ`h-screen`ï¼‰ï¼Œä½¿ç”¨ Flexbox å¸ƒå±€ï¼ˆ`flex flex-col items-center`ï¼‰ï¼Œä½¿å…¶å­å…ƒç´ å‚ç›´å±…ä¸­    

  é¡µé¢å®å†µï¼š

  ![image-20250425165451395](../../.vuepress/public/blog_images/image-20250425165451395.png)

### è¾“å…¥æ¡†æ¨¡å—

è¾“å…¥æ¡†æ¨¡å—![image-20250425165403841](../../.vuepress/public/blog_images/image-20250425165403841.png)

ä½¿ç”¨ React çš„çŠ¶æ€ç®¡ç†æ¥å¤„ç†è¾“å…¥å†…å®¹çš„å˜åŒ–ã€‚

-  `textarea` å…ƒç´ ï¼Œç”¨äºå¤šè¡Œæ–‡æœ¬è¾“å…¥ã€‚

- `onChange={(e) => setInput(e.target.value)}`ï¼šå½“ `textarea` çš„å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–° `input` çŠ¶æ€å˜é‡çš„å€¼ä¸ºå½“å‰çš„è¾“å…¥å†…å®¹ã€‚
- `value={input}`ï¼šå°† `textarea` çš„å€¼ç»‘å®šåˆ° `input` çŠ¶æ€å˜é‡ä¸Šã€‚

è¿™é‡Œçš„ `input`å’Œ`setInput`ç”¨åˆ°äº†`useState` é’©å­ï¼Œå¼•å…¥ç”Ÿå‘½é’©å­å¹¶å®šä¹‰ä¸¤ä¸ªçŠ¶æ€å˜é‡

```tsx
import {useState} from "react";

.....
export default function Home() {
  const [input, setInput] = useState("");
....
```

é¡µé¢å®å†µï¼š

![image-20250425165426078](../../.vuepress/public/blog_images/image-20250425165426078.png)

### æ¨¡å‹é€‰æ‹©æ¨¡å—

![image-20250425165654585](../../.vuepress/public/blog_images/image-20250425165654585.png)

åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ¡ä»¶æ ·å¼å’Œäº¤äº’æ•ˆæœçš„æŒ‰é’®

é¡µé¢å®å†µï¼š

![image-20250425165716987](../../.vuepress/public/blog_images/image-20250425165716987.png)

### å³ä¸‹è§’æäº¤æŒ‰é’®

å³ä¸‹è§’é€šè¿‡æäº¤å°†è¾“å…¥å†…å®¹æäº¤ç»™AI

![image-20250425170714519](../../.vuepress/public/blog_images/image-20250425170714519.png)

è¿™é‡Œæˆ‘ä»¬å¯¼å…¥muiåº“ï¼Œå®ƒå¯ä»¥æä¾›UIç»„ä»¶[Installation - Material UI](https://mui.com/material-ui/getting-started/installation/)

è¿›è¡Œå®‰è£…ç»„ä»¶åº“

```
npm install @mui/icons-material @mui/material @emotion/styled @emotion/react
```

å®‰è£…å¥½åï¼Œåœ¨æˆ‘ä»¬çš„pageæ–‡ä»¶é‡Œè¿›è¡Œå¯¼å…¥ï¼Œæ’å…¥åˆ°æäº¤æŒ‰é’®ä¸­

```ts
import EastIcon from '@mui/icons-material/East'

......
          {/* å³ä¸‹è§’æäº¤æŒ‰é’® */}
            <div className="flex items-center justify-center border-2 mr-4 border-black p-1
            rounded-full">
              <EastIcon></EastIcon>

            </div>
```

é¡µé¢å®å†µï¼š

![image-20250425171720165](../../.vuepress/public/blog_images/image-20250425171720165.png)

é¦–é¡µå®Œæ•´ä»£ç ï¼š

```tsx
'use client'

import Image from "next/image";
import {useState} from "react";
import EastIcon from '@mui/icons-material/East'


export default function Home() {

  const [input, setInput] = useState("");
  const [model,setModel] = useState("deepseek-v3");
  const handelChangeModel = () => {
    setModel(model === 'deepseek-v3' ? 'deepseek-r1' : 'deepseek-v3');
  }

  return (
    <div className="h-screen flex flex-col items-center">
      <div className="h-1/5"></div>
      <div className="w-1/2">
        <p className="text-bold text-2xl text-center">
          æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—
        </p>

        <div className="flex flex-col items-center justify-center mt-4
        shadow-lg border-[1px] border-gray-300 h-32 rounded-lg">
          <textarea
            className="w-full rounded-lg p-3 h-30 focus:outline-none"
            value={input}
            onChange={(e) => setInput(e.target.value)}
            >
          </textarea>
          <div className="flex flex-row items-center justify-between w-full h-12 mb-2">
            <div>
              {/*å·¦ä¸‹è§’æ·±åº¦æ€è€ƒæŒ‰é’®*/}
              <div className={`flex flex-row items-center justify-center rounded-lg 
              border-[1px] px-2 py-1 ml-2 cursor-pointer ${model === 'deepseek-r1' ? 
                  "border-blue-300 bg-blue-200" : "border-gray-300"}`}
                   onClick={handelChangeModel}
              >
                <p className="text-sm">
                  æ·±åº¦æ€è€ƒ(R1)
                </p>
              </div>
            </div>
          {/* å³ä¸‹è§’æäº¤æŒ‰é’® */}
            <div className="flex items-center justify-center border-2 mr-4 border-black p-1
            rounded-full">
              <EastIcon></EastIcon>

            </div>
          </div>

        </div>
      </div>
    </div>
  );
}

```

## èŠå¤©é¡µ

### èŠå¤©æ¨¡å—

åˆ›å»ºèŠå¤©é¡µæ–‡ä»¶`src/app/chat/[chat_id]/page.tsx`

è¿›å…¥nextjså®˜ç½‘æ–‡æ¡£[Routing: Dynamic Routes | Next.js](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes)

æŒ‰ç…§è·¯å¾„æ ¼å¼åˆ›å»ºå¥½æ–‡ä»¶ï¼Œå¤åˆ¶ç»™å‡ºçš„é¡µé¢ä¾‹å­

<img src="../../.vuepress/public/blog_images/image-20250425172047956.png" alt="image-20250425172047956" style="zoom:50%;" />

æŠŠå®ƒå¤åˆ¶åˆ°æˆ‘ä»¬çš„èŠå¤©é¡µæ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹

![image-20250425172205022](../../.vuepress/public/blog_images/image-20250425172205022.png)

ç‚¹å‡»Menuï¼Œåœ¨å®˜æ–¹æ–‡æ¡£é‡Œæ‰¾åˆ°chatbot[AI SDK UI: Chatbot](https://sdk.vercel.ai/docs/ai-sdk-ui/chatbot)

å°†ä¾‹å­ä¸­çš„ä»£ç å¤åˆ¶ä¸‹æ¥è¿›è¡Œä¿å­˜ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†å†™å¥½çš„ç®€å•èŠå¤©é—®ç­”

![image-20250425172604275](../../.vuepress/public/blog_images/image-20250425172604275.png)

æ­¤æ—¶åˆ‡æ¢é¡µé¢è·¯ç”±è¿›è¡Œæµ‹è¯•ï¼Œåœ¨æœ¬åœ°çš„ï¼š`localhost:3000/chat/1` 

å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªè¾“å…¥æ¡†å¯ä»¥è¿›è¡ŒèŠå¤©äº†

![image-20250425172723895](../../.vuepress/public/blog_images/image-20250425172723895.png)

è¾“å…¥æ–‡å­—è¿›è¡Œæµ‹è¯•

![image-20250425172800545](../../.vuepress/public/blog_images/image-20250425172800545.png)

æ›´æ”¹å¸ƒå±€ï¼Œä½¿å¾—AIå‘é€çš„æ¶ˆæ¯åœ¨å·¦è¾¹ï¼Œç”¨æˆ·å‘é€çš„æ¶ˆæ¯æ”¾åœ¨å³è¾¹,æ›´æ”¹æ°”æ³¡æ¡†é¢œè‰²

![image-20250425174433028](../../.vuepress/public/blog_images/image-20250425174433028.png)

**é¡µé¢è‡ªåŠ¨ä¸‹æ»‘åŠŸèƒ½**

ä½¿ç”¨`useRef`é’©å­ï¼Œå®ƒå¯ä»¥ç”¨æ¥å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å€¼,è¿™ä¸ªå€¼åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚ä½¿å¾—æ¶ˆæ¯èƒ½å¤Ÿä¿æŒåœ¨é¡µé¢ä¸­

![image-20250425173907381](../../.vuepress/public/blog_images/image-20250425173907381.png)

![image-20250425174100900](../../.vuepress/public/blog_images/image-20250425174100900.png)

ä½¿ç”¨`useEffect`é’©å­,å®ç°è‡ªåŠ¨æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨çš„åŠŸèƒ½

```tsx
    // è‡ªåŠ¨ä¸‹æ»‘
    const endRef = useRef<HTMLDivElement>(null);
    useEffect(() => {
        if (endRef.current){
            endRef?.current?.scrollIntoView({behavior: "smooth"})
        }
    }, [messages])
```

å½“ `messages` æ›´æ–°æ—¶ï¼Œ`useEffect` é’©å­ä¼šè§¦å‘ï¼Œè‡ªåŠ¨æ»šåŠ¨åˆ°è¿™ä¸ª `div` çš„ä½ç½®ï¼Œå®é™…ä¸Šæ˜¯æ»šåŠ¨åˆ°æ¶ˆæ¯åˆ—è¡¨çš„åº•éƒ¨ã€‚`{behavior: "smooth"}` å‚æ•°ç¡®ä¿æ»šåŠ¨æ˜¯å¹³æ»‘çš„

è¿™æ ·å°±ä¼šä½¿é¡µé¢è‡ªåŠ¨ä¸‹æ»‘

**è¾“å…¥æ¡†æ¨¡å—**

ä»¿ç…§é¦–é¡µ`src/app/page.tsx`çš„è¾“å…¥æ¡†ï¼Œå¤åˆ¶å¯¹åº”ä»£ç 

```tsx
        <div className="flex flex-col items-center justify-center mt-4
        shadow-lg border-[1px] border-gray-300 h-32 rounded-lg">
          <textarea
            className="w-full rounded-lg p-3 h-30 focus:outline-none"
            value={input}
            onChange={(e) => setInput(e.target.value)}
            >
          </textarea>
          <div className="flex flex-row items-center justify-between w-full h-12 mb-2">
            <div>
              {/*å·¦ä¸‹è§’æ·±åº¦æ€è€ƒæŒ‰é’®*/}
              <div className={`flex flex-row items-center justify-center rounded-lg 
              border-[1px] px-2 py-1 ml-2 cursor-pointer ${model === 'deepseek-r1' ? 
                  "border-blue-300 bg-blue-200" : "border-gray-300"}`}
                   onClick={handelChangeModel}
              >
                <p className="text-sm">
                  æ·±åº¦æ€è€ƒ(R1)
                </p>
              </div>
            </div>
          {/* å³ä¸‹è§’æäº¤æŒ‰é’® */}
            <div className="flex items-center justify-center border-2 mr-4 border-black p-1
            rounded-full">
              <EastIcon></EastIcon>

            </div>
          </div>

        </div>
      </div>
```

![image-20250425194951577](../../.vuepress/public/blog_images/image-20250425194951577.png)

å®šä¹‰ä¸€ä¸ªåˆ‡æ¢æ¨¡å‹çš„æ–¹æ³•![image-20250425195031384](../../.vuepress/public/blog_images/image-20250425195031384.png)

å¢åŠ ç‚¹å‡»åŠŸèƒ½ï¼ŒåŒæ—¶åœ¨é¦–é¡µä¹Ÿè¡¥å……æ­¤åŠŸèƒ½

![image-20250425195148915](../../.vuepress/public/blog_images/image-20250425195148915.png)

è¿™æ ·å°±å¼€å‘å®Œæˆäº†

![image-20250425195342703](../../.vuepress/public/blog_images/image-20250425195342703.png)

èŠå¤©é¡µå®Œæ•´ä»£ç 

```tsx
'use client';

import {useChat} from '@ai-sdk/react';
import {useEffect, useRef, useState} from "react";
import EastIcon from "@mui/icons-material/East";

export default function Page() {
    const {messages, input, handleInputChange, handleSubmit} = useChat({});

    const [model,setModel] = useState("deepseek-v3");
    const handelChangeModel = () => {
        setModel(model === 'deepseek-v3' ? 'deepseek-r1' : 'deepseek-v3');
    }
    // è‡ªåŠ¨ä¸‹æ»‘
    const endRef = useRef<HTMLDivElement>(null);
    useEffect(() => {
        if (endRef.current){
            endRef?.current?.scrollIntoView({behavior: "smooth"})
        }
    }, [messages])

    return (
        <div className='flex flex-col h-screen justify-between items-center'>
            <div className='flex flex-col w-2/3 gap-8 overflow-auto
            justify-between flex-1'>
                <div className='h-4'></div>
                <div className='flex flex-col gap-8 flex-1'>
                    {messages?.map(message => (
                        <div
                            key={message.id}
                            className={`rounded-lg flex flex-row ${message?.role
                            === 'assistant' ? 'justify-start mr-18' : "justify-end ml-10"}`}
                        >
                            <p className={`inline-block p-2 rounded-lg ${message?.role
                             === 'assistant' ? 'bg-blue-300' : 'bg-slate-100'}`}>
                                {message.content}
                            </p>
                        </div>
                    ))}
                </div>
                <div className='h-4' ref={endRef}></div>
            </div>

        {/*  è¾“å…¥æ¡†  */}
            <div className="flex flex-col items-center justify-center mt-4
        shadow-lg border-[1px] border-gray-300 h-32 rounded-lg w-2/3">
          <textarea
              className="w-full rounded-lg p-3 h-30 focus:outline-none"
              value={input}
              onChange={handleInputChange}
          >
          </textarea>
                <div className="flex flex-row items-center justify-between w-full h-12 mb-2">
                    <div>
                        {/*å·¦ä¸‹è§’æ·±åº¦æ€è€ƒæŒ‰é’®*/}
                        <div className={`flex flex-row items-center justify-center rounded-lg 
              border-[1px] px-2 py-1 ml-2 cursor-pointer ${model === 'deepseek-r1' ?
                            "border-blue-300 bg-blue-200" : "border-gray-300"}`}
                        onClick={handelChangeModel}
                        >
                            <p className="text-sm">
                                æ·±åº¦æ€è€ƒ(R1)
                            </p>
                        </div>
                    </div>
                    {/* å³ä¸‹è§’æäº¤æŒ‰é’® */}
                    <div className="flex items-center justify-center border-2 mr-4 border-black p-1
            rounded-full"
                    onClick={handleSubmit}>
                        <EastIcon></EastIcon>
                    </div>
                </div>
            </div>

        </div>
    );
}
```



## æ·±æµ…è‰²æ¨¡å¼åˆ‡æ¢

æ ¹æ®è¿™ç¯‡æ–‡ç« 

[ğŸŒˆ ä¸ºä½ çš„ç½‘ç«™å¢åŠ ç‚¹çµæ€§ï¼šéšç³»ç»Ÿå˜è‰²ç½‘ç«™åˆ‡æ¢ä¸»é¢˜è‰²å·²ç»æ˜¯éå¸¸å¸¸è§çš„åŠŸèƒ½äº†ï¼Œæä¾›æµ…è‰²å’Œæš—è‰²ä¸¤ç§è‰²è°ƒå¯ä»¥æ»¡è¶³ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ - æ˜é‡‘](https://juejin.cn/post/7368413086955225124)

åœ¨`src\app\globals.css`ä¸­æ›´æ”¹åº”ç”¨ç¨‹åºçš„ä¸»é¢˜é¢œè‰²ï¼Œä»æ·±è‰²æ”¹ä¸ºæµ…è‰²

```css
/*@media (prefers-color-scheme: dark) {*/
/*  :root {*/
/*    --background: #0a0a0a;*/
/*    --foreground: #ededed;*/
/*  }*/
/*}*/
/* æ³¨é‡Šæ‰åŸæ¥çš„æ·±è‰²æ¨¡å¼ */

@media (prefers-color-scheme: light) {
    :root {
      --background: #f2f2f2;
    }
}
```

## Googleå­—ä½“é—®é¢˜

![image-20250425193642566](../../.vuepress/public/blog_images/image-20250425193642566.png)

ä¸­å›½å¤§é™†ç”¨æˆ·åœ¨è®¿é—® Google Fonts æ—¶ï¼Œæµè§ˆå™¨è¯·æ±‚å¯èƒ½è¢«ç½‘ç»œå±éšœæ‹¦æˆªï¼Œæˆ–éœ€è¦é€šè¿‡å¤æ‚çš„è¿‚å›è·¯å¾„å’Œå¤šä¸ªä¸­é—´èŠ‚ç‚¹æ‰èƒ½å®Œæˆã€‚

åœ¨`src/app/globals.css`ä¸­ï¼Œæœ‰æœªå®šä¹‰çš„é”™è¯¯

![image-20250425194027879](../../.vuepress/public/blog_images/image-20250425194027879.png)

åœ¨rootä¸­è¡¥å……ä»¥ä¸‹ä»£ç 

```ts
:root {
  --background: #ffffff;
  --foreground: #171717;
  //ä¸‹é¢ä¸¤è¡Œæ˜¯è¡¥å……çš„ä»£ç 
  --font-geist-sans: Arial, Helvetica, sans-serif;
  --font-geist-mono: "Courier New", Courier, monospace;
}
```

æš‚æ—¶ä¸å½±å“ä½¿ç”¨

*æ–‡å­—å†™äºï¼šå¹¿ä¸œ*