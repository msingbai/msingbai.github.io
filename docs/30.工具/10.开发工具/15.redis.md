---
title: redis
date: 2023-03-04 11:04:45
permalink: /dev/e3155e/
categories:
  - 工具
  - 开发工具
tags:
  - redis
  - redis错误
---

## 前言

使用`redis`中遇到的奇葩问题，本文持续更新

<!-- more -->

<InArticleAdsense
    data-ad-client="ca-pub-1725717718088510"
    data-ad-slot="7426219401">
</InArticleAdsense>

## 安装

### `Linux`

#### 源码安装

1. 安装`redis`
    
    ``` shell
    sudo yum -y install redis
    ```

2. 修改配置文件

    ``` shell
    vi /etc/redis.conf

    # 必要修改的地方
    # 1. 注释掉 bind 127.0.0.1
    # 2. 修改密码，将#requirepass foobared修改为 requirepass 您的密码
    ```

3. 启动`redis`

    ``` shell
    sudo systemctl start redis
    ```

#### 压缩包安装

> 本次以4.0.1版本为例

1. 在官网下载`tar.gz`的安装包，或者通过`wget`的方式下载

    ``` shell
    wget http://download.redis.io/releases/redis-4.0.1.tar.gz
    ```

2. 解压

    ``` shell
    tar -zxvf redis-4.0.1.tar.gz
    ```

3. 编译，通过`make`来编译，`make`是自动编译，会根据`Makefile`中描述的内容来进行编译。

    ``` shell
    cd redis-4.0
    make
    ```

4. 安装

    ``` shell
    make install
    ```

5. 启动服务器，来看看安装是否成功。

#### 基础命令

``` shell
#启动redis服务器
systemctl start redis.service 

#停止redis服务器
systemctl stop redis.service 

#重新启动redis服务器
systemctl restart redis.service 

#获取redis服务器的运行状态
systemctl status redis.service 

#开机启动redis服务器
systemctl enable redis.service 

#开机禁用redis服务器
systemctl disable redis.service 
```

## `MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on`

### 翻译

`Redis`被配置为保存数据库快照，但它目前不能持久化到硬盘。用来修改集合数据的命令不能用。请查看Redis日志的详细错误信息。

### 解决方案

``` shell
vi /etc/sysctl.conf

## 添加一个配置
vm.overcommit_memory = 1
## 保存后然后重启
```
